生命周期钩子
================

生命周期钩子允许在请求-响应周期的某个时刻执行可调用对象。可用的钩子有：

+--------------------------------------+------------------------------------+
| 名称                                 | 运行时机                           |
+======================================+====================================+
| `before_request`_                    | 在路由器处理函数之前               |
+--------------------------------------+------------------------------------+
| `after_request`_                     | 在路由处理函数之后                 |
+--------------------------------------+------------------------------------+
| `after_response`_                    | 在响应发送之后                     |
+--------------------------------------+------------------------------------+

.. _before_request:

请求前
--------------

``before_request`` 钩子在调用路由处理函数之前立即运行。它可以是接受 :class:`~litestar.connection.Request` 作为其第一个参数并返回 ``None`` 或可在响应中使用的值的任何可调用对象。如果返回值，则将绕过此请求的路由器处理程序。

.. literalinclude:: /examples/lifecycle_hooks/before_request.py
    :language: python


.. _after_request:

请求后
-------------

``after_request`` 钩子在路由处理程序返回并解析响应对象后运行。它可以是任何接受 :class:`~litestar.response.Response` 实例作为其第一个参数并返回 ``Response`` 实例的可调用对象。返回的 ``Response`` 实例不一定必须是接收到的实例。
